<%- include("templates/header", {navLinks: navLinks} ) %>
    <h1>Host a book club</h1>

    <form method="POST" action="/host-book-club" class="mt-4">
        <div class="mb-3">
            <label for="btitle">Book title</label>
            <input type="text" class="form-control" id="btitle" name="btitle" required>
        </div>
        <div class="mb-3">
            <label for="bdescription">Brief description of this book</label>
            <textarea class="form-control" id="bdescription" name="bdescription" rows="5" required></textarea>
        </div>

        <div class="mb-3">
            <label for="tags">Book Genres</label>
            <input type="text" class="form-control" id="tag-input" placeholder="Enter a genre and press Add">
            <button type="button" id="add-tag" class="btn btn-secondary mt-2">Add</button>
            <div id="tags-container" class="mt-3">
                <!-- Tags will be displayed here -->
            </div>
            <!-- Hidden input to store the tags as a comma-separated string -->
            <input type="hidden" name="genres" id="genres">
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const addTagButton = document.getElementById('add-tag');
            const tagInput = document.getElementById('tag-input');
            const tagsContainer = document.getElementById('tags-container');
            const genresInput = document.getElementById('genres');
    
            let tags = [];
    
            function updateTagsInput() {
                genresInput.value = tags.join(',');
            }
    
            function createTagElement(tag) {
                const tagElement = document.createElement('span');
                tagElement.className = 'badge bg-secondary me-1';
                tagElement.innerText = tag;
    
                const removeButton = document.createElement('span');
                removeButton.className = 'ms-2 text-danger';
                removeButton.style.cursor = 'pointer';
                removeButton.innerHTML = '&times;';
                removeButton.addEventListener('click', function() {
                    tags = tags.filter(t => t !== tag);
                    tagsContainer.removeChild(tagElement);
                    updateTagsInput();
                });
    
                tagElement.appendChild(removeButton);
                return tagElement;
            }
    
            addTagButton.addEventListener('click', function() {
                const tag = tagInput.value.trim();
                if (tag && !tags.includes(tag)) {
                    tags.push(tag);
    
                    const tagElement = createTagElement(tag);
                    tagsContainer.appendChild(tagElement);
    
                    updateTagsInput();
                    tagInput.value = '';
                }
            });
        });
    </script>
    <%- include("templates/footer") %>